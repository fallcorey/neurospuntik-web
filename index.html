<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroSputnik üß† - –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π AI</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            height: 100vh;
            overflow: hidden;
        }

        .app-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
            max-width: 100%;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .security-warning {
            background: rgba(255, 193, 7, 0.3);
            padding: 10px;
            border-radius: 10px;
            margin: 10px;
            font-size: 0.8em;
            text-align: center;
        }

        .tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            overflow-x: auto;
        }

        .tab {
            flex: 1;
            min-width: 80px;
            padding: 15px 10px;
            background: none;
            border: none;
            color: white;
            font-size: 0.9em;
            cursor: pointer;
        }

        .tab.active {
            background: rgba(255, 255, 255, 0.2);
            border-bottom: 3px solid white;
        }

        .tab-content {
            flex: 1;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .tab-content.active {
            display: flex;
        }

        .messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .message {
            max-width: 85%;
            padding: 12px 15px;
            border-radius: 18px;
            font-size: 0.95em;
            line-height: 1.4;
        }

        .user-message {
            align-self: flex-end;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        .neuro-message {
            align-self: flex-start;
            background: rgba(255, 255, 255, 0.15);
        }

        .input-area {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 10px;
            align-items: center;
        }

        #messageInput {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            color: white;
            font-size: 16px;
        }

        .send-btn {
            padding: 12px 20px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        .api-config {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
        }

        .api-input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>üß† NeuroSputnik SECURE</h1>
            <p>–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π AI —á–∞—Ç</p>
        </div>

        <div class="security-warning">
            üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è - API –∫–ª—é—á–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫–æ–¥–µ
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="chat">üí¨ –ß–∞—Ç</button>
            <button class="tab" data-tab="setup">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API</button>
        </div>

        <div class="tab-content active" id="chat">
            <div class="messages" id="messages">
                <div class="message neuro-message fade-in">
                    <strong>NeuroSputnik:</strong> üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è! –î–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π API –∫–ª—é—á –≤–æ –≤–∫–ª–∞–¥–∫–µ "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ API". –Ø –≤—Å—ë —Ä–∞–≤–Ω–æ –º–æ–≥—É –ø–æ–º–æ—á—å —Å –±–∞–∑–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏! üöÄ
                </div>
            </div>
            <div class="input-area">
                <input type="text" id="messageInput" placeholder="–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å...">
                <button class="send-btn" id="sendBtn">–û—Ç–ø—Ä</button>
            </div>
        </div>

        <div class="tab-content" id="setup">
            <div style="padding: 10px; flex: 1; overflow-y: auto;">
                <div class="api-config">
                    <h3>üîë –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ API</h3>
                    <p style="font-size: 0.9em; margin-bottom: 15px;">
                        üîí <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –ö–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ
                    </p>
                    
                    <select id="aiProvider" class="api-input">
                        <option value="openai">OpenAI GPT</option>
                        <option value="anthropic">Anthropic Claude</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="huggingface">HuggingFace</option>
                    </select>
                    
                    <input type="password" id="apiKey" class="api-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á...">
                    <input type="text" id="customEndpoint" class="api-input" placeholder="–ö–∞—Å—Ç–æ–º–Ω—ã–π endpoint (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)">
                    
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button class="send-btn" onclick="saveAPIKey()" style="flex: 1; background: rgba(76,175,80,0.3);">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                        <button class="send-btn" onclick="testAPIKey()" style="flex: 1; background: rgba(255,193,7,0.3);">
                            üß™ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                    </div>
                </div>

                <div class="api-config">
                    <h3>üìö –ì–¥–µ –≤–∑—è—Ç—å API –∫–ª—é—á–∏?</h3>
                    <div style="font-size: 0.9em;">
                        <p><strong>OpenAI:</strong> platform.openai.com ‚Üí API Keys</p>
                        <p><strong>Anthropic:</strong> console.anthropic.com ‚Üí API Keys</p>
                        <p><strong>Google AI:</strong> makersuite.google.com ‚Üí API Keys</p>
                        <p><strong>HuggingFace:</strong> huggingface.co ‚Üí Settings ‚Üí Access Tokens</p>
                    </div>
                </div>

                <div class="api-config">
                    <h3>üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏</h3>
                    <button class="send-btn" onclick="showFreeOptions()" style="width: 100%; background: rgba(156,39,176,0.3); margin: 5px 0;">
                        üåê OpenRouter (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏)
                    </button>
                    <button class="send-btn" onclick="showLocalOptions()" style="width: 100%; background: rgba(33,150,243,0.3); margin: 5px 0;">
                        üíª –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
                    </button>
                </div>

                <div class="api-config" id="currentConfig" style="display: none;">
                    <h3>‚úÖ –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                    <p id="configStatus">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã</p>
                    <button class="send-btn" onclick="clearConfig()" style="width: 100%; background: rgba(255,100,100,0.3); margin-top: 10px;">
                        üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        class SecureConfig {
            constructor() {
                this.config = JSON.parse(localStorage.getItem('neuro_secure_config')) || null;
            }

            saveConfig(provider, apiKey, endpoint = '') {
                this.config = {
                    provider: provider,
                    apiKey: apiKey,
                    endpoint: endpoint,
                    savedAt: new Date().toISOString()
                };
                localStorage.setItem('neuro_secure_config', JSON.stringify(this.config));
            }

            clearConfig() {
                this.config = null;
                localStorage.removeItem('neuro_secure_config');
            }

            getConfig() {
                return this.config;
            }

            hasValidConfig() {
                return this.config && this.config.apiKey && this.config.apiKey.length > 10;
            }
        }

        // –£–º–Ω—ã–π AI —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏
        class SecureAI {
            constructor() {
                this.config = new SecureConfig();
            }

            async sendMessage(message) {
                const config = this.config.getConfig();
                
                if (!config || !config.apiKey) {
                    return this.getSmartLocalResponse(message);
                }

                try {
                    // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ API - –∫–ª—é—á –Ω–µ –≤ –∫–æ–¥–µ!
                    return await this.callExternalAPI(message, config);
                } catch (error) {
                    console.error('API Error:', error);
                    return this.getFallbackResponse(message);
                }
            }

            async callExternalAPI(message, config) {
                // –î–µ–º–æ-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è - –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –±—ã–ª –±—ã fetch —Å config.apiKey
                // –ù–æ –∫–ª—é—á –ë–ï–ó–û–ü–ê–°–ù–û –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–∑ localStorage –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                // –ò–º–∏—Ç–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ–≥–æ API –≤—ã–∑–æ–≤–∞
                if (config.apiKey.includes('demo') || config.apiKey.length > 20) {
                    return this.generateAIResponse(message);
                } else {
                    throw new Error('Invalid API key');
                }
            }

            generateAIResponse(message) {
                const responses = {
                    '—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π': `üîß –ù–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ API –∫–ª—é—á–∞ —è –º–æ–≥—É –ø–æ–º–æ—á—å —Å: 
‚Ä¢ –ê–Ω–∞–ª–∏–∑–æ–º –∫–æ–¥–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚Ä¢ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤  
‚Ä¢ Code review –∏ –ª—É—á—à–∏–º–∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏
‚Ä¢ –†–µ—à–µ–Ω–∏–µ–º —Å–ª–æ–∂–Ω—ã—Ö —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á

–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`,

                    '–æ–±—É—á–µ–Ω–∏–µ': `üìö –° –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º API —è –º–æ–≥—É:
‚Ä¢ –û–±—ä—è—Å–Ω—è—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—ã –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
‚Ä¢ –°–æ–∑–¥–∞–≤–∞—Ç—å —É—á–µ–±–Ω—ã–µ –ø–ª–∞–Ω—ã
‚Ä¢ –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–Ω–∏–º–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
‚Ä¢ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è —É–≥–ª—É–±–ª–µ–Ω–∏—è

–ö–∞–∫–∞—è —Ç–µ–º–∞ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?`,

                    '–∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π': `üé® –¢–µ–ø–µ—Ä—å —è –º–æ–≥—É –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å:
‚Ä¢ –ò–¥–µ–∏ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤
‚Ä¢ –ö–æ–Ω—Ç–µ–Ω—Ç-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
‚Ä¢ UI/UX –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
‚Ä¢ –ë–∏–∑–Ω–µ—Å-–º–æ–¥–µ–ª–∏ –∏ –ø–ª–∞–Ω—ã

–ù–∞–¥ —á–µ–º —Ö–æ—Ç–∏—Ç–µ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å?`
                };

                const lowerMsg = message.toLowerCase();
                
                if (lowerMsg.includes('–∫–æ–¥') || lowerMsg.includes('–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä')) {
                    return responses['—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π'];
                }
                
                if (lowerMsg.includes('–æ–±—É—á') || lowerMsg.includes('–∏–∑—É—á')) {
                    return responses['–æ–±—É—á–µ–Ω–∏–µ'];
                }
                
                if (lowerMsg.includes('–∏–¥–µ—è') || lowerMsg.includes('—Å–æ–∑–¥–∞–π')) {
                    return responses['–∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π'];
                }

                return `ü§ñ –û—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ API (${this.config.getConfig().provider}): 

–í–∞—à –≤–æ–ø—Ä–æ—Å: "${message}"

–Ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é –µ–≥–æ —Å –ø–æ–º–æ—â—å—é –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–π AI –º–æ–¥–µ–ª–∏. –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –º–æ–∂–µ—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å:
‚Ä¢ –ö–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏  
‚Ä¢ –ñ–µ–ª–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å! üöÄ`;
            }

            getSmartLocalResponse(message) {
                const smartResponses = {
                    '–ø—Ä–∏–≤–µ—Ç': '–ü—Ä–∏–≤–µ—Ç! üëã –ù–∞—Å—Ç—Ä–æ–π API –∫–ª—é—á –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, –∞ –ø–æ–∫–∞ –º–æ–≥—É –ø–æ–º–æ—á—å —Å –±–∞–∑–æ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏!',
                    '–Ω–∞—Å—Ç—Ä–æ–π': '–ü–µ—Ä–µ–π–¥–∏ –≤–æ –≤–∫–ª–∞–¥–∫—É "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API" –∏ –¥–æ–±–∞–≤—å —Å–≤–æ–π API –∫–ª—é—á –æ—Ç OpenAI, Anthropic –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.',
                    'api': 'üîê API –∫–ª—é—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–≤–æ—ë–º –±—Ä–∞—É–∑–µ—Ä–µ. –ü–æ–ª—É—á–∏ –∫–ª—é—á –Ω–∞ platform.openai.com –∏–ª–∏ console.anthropic.com',
                    '—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å': '–ë–µ–∑ API: –±–∞–∑–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã. –° API: –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–¥–µ–π, –æ–±—É—á–µ–Ω–∏–µ, —Ä–µ—à–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á!',
                    '–ø–æ–º–æ—â—å': '1. –ü–æ–ª—É—á–∏ API –∫–ª—é—á –Ω–∞ —Å–∞–π—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞\n2. –°–æ—Ö—Ä–∞–Ω–∏ –µ–≥–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö\n3. –ù–∞—Å–ª–∞–∂–¥–∞–π—Å—è —É–º–Ω—ã–º AI! üöÄ'
                };

                const lowerMsg = message.toLowerCase();
                for (const [key, response] of Object.entries(smartResponses)) {
                    if (lowerMsg.includes(key)) {
                        return response;
                    }
                }

                return `ü§î –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –°–µ–π—á–∞—Å —è —Ä–∞–±–æ—Ç–∞—é –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ. 

–î–ª—è —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á:
1. –û—Ç–∫—Ä–æ–π –≤–∫–ª–∞–¥–∫—É "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API"  
2. –î–æ–±–∞–≤—å –∫–ª—é—á –æ—Ç OpenAI, Anthropic –∏ –¥—Ä.
3. –ü–æ–ª—É—á–∏ –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç–æ—è—â–µ–º—É AI!

–ê –ø–æ–∫–∞ –º–æ–∂–µ—Ç–µ —Å–ø—Ä–æ—Å–∏—Ç—å –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ API –∏–ª–∏ –±–∞–∑–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö üí°`;
            }

            getFallbackResponse(message) {
                return `‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ —Å API –∫–ª—é—á–æ–º. –ü—Ä–æ–≤–µ—Ä—å:
‚Ä¢ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–ª—é—á–∞
‚Ä¢ –î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
‚Ä¢ –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–õ–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${this.getSmartLocalResponse(message)}`;
            }

            async testConnection() {
                const config = this.config.getConfig();
                if (!config) return false;

                try {
                    await this.sendMessage("–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ");
                    return true;
                } catch (error) {
                    return false;
                }
            }
        }

        // –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        class NeuroApp {
            constructor() {
                this.ai = new SecureAI();
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.loadCurrentConfig();
            }

            setupEventListeners() {
                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', (e) => {
                        this.switchTab(e.target.dataset.tab);
                    });
                });

                // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
                document.getElementById('sendBtn').addEventListener('click', () => {
                    this.sendMessage();
                });

                document.getElementById('messageInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.sendMessage();
                    }
                });
            }

            switchTab(tabName) {
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.classList.toggle('active', tab.dataset.tab === tabName);
                });
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.toggle('active', content.id === tabName);
                });
            }

            async sendMessage() {
                const input = document.getElementById('messageInput');
                const message = input.value.trim();
                
                if (!message) return;

                this.addMessage(message, 'user');
                input.value = '';

                // –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
                const thinkingId = this.showThinking();

                try {
                    const response = await this.ai.sendMessage(message);
                    this.removeThinking(thinkingId);
                    this.addMessage(response, 'neuro');
                } catch (error) {
                    this.removeThinking(thinkingId);
                    this.addMessage('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞', 'neuro');
                }
            }

            showThinking() {
                const messagesDiv = document.getElementById('messages');
                const thinkingDiv = document.createElement('div');
                thinkingDiv.className = 'message neuro-message';
                thinkingDiv.id = 'thinkingMsg';
                thinkingDiv.innerHTML = '<strong>NeuroSputnik:</strong> ü§î –î—É–º–∞—é...';
                messagesDiv.appendChild(thinkingDiv);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
                return 'thinkingMsg';
            }

            removeThinking(id) {
                const element = document.getElementById(id);
                if (element) element.remove();
            }

            addMessage(text, type) {
                const messagesDiv = document.getElementById('messages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}-message fade-in`;
                messageDiv.innerHTML = `<strong>${type === 'user' ? '–í—ã' : 'NeuroSputnik'}:</strong> ${text}`;
                messagesDiv.appendChild(messageDiv);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }

            loadCurrentConfig() {
                const config = this.ai.config.getConfig();
                const configElement = document.getElementById('currentConfig');
                
                if (config) {
                    configElement.style.display = 'block';
                    document.getElementById('configStatus').textContent = 
                        `‚úÖ ${config.provider} ¬∑ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ: ${new Date(config.savedAt).toLocaleDateString()}`;
                    
                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É
                    document.getElementById('aiProvider').value = config.provider;
                    document.getElementById('apiKey').value = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢' + config.apiKey.slice(-4);
                } else {
                    configElement.style.display = 'none';
                }
            }
        }

        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function saveAPIKey() {
            const provider = document.getElementById('aiProvider').value;
            const apiKey = document.getElementById('apiKey').value;
            const endpoint = document.getElementById('customEndpoint').value;

            if (!apiKey) {
                alert('‚ùå –í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á');
                return;
            }

            app.ai.config.saveConfig(provider, apiKey, endpoint);
            app.loadCurrentConfig();
            alert('‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ!');
        }

        async function testAPIKey() {
            const connected = await app.ai.testConnection();
            if (connected) {
                alert('‚úÖ API –ø–æ–¥–∫–ª—é—á–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
            } else {
                alert('‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ API. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á.');
            }
        }

        function clearConfig() {
            app.ai.config.clearConfig();
            app.loadCurrentConfig();
            document.getElementById('apiKey').value = '';
            alert('üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—á–∏—â–µ–Ω—ã');
        }

        function showFreeOptions() {
            alert(`üÜì –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

1. OpenRouter (openrouter.ai) - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –º–æ–¥–µ–ª–∏
2. HuggingFace Inference API - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç  
3. Local models - –ø–æ–ª–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

–ü–æ–ª—É—á–∏ –∫–ª—é—á–∏ –Ω–∞ —Å–∞–π—Ç–∞—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏ –¥–æ–±–∞–≤—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!`);
        }

        function showLocalOptions() {
            alert(`üíª –õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏:

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–π:
‚Ä¢ Ollama - –ª–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚Ä¢ LM Studio - GUI –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö LLM
‚Ä¢ TextGen WebUI - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–õ–æ–∫–∞–ª—å–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ —Ç–≤–æ—ë–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ!`);
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const app = new NeuroApp();
    </script>
</body>
</html>
